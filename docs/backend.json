
{
  "entities": {
    "User": {
      "title": "User",
      "description": "Represents a user account, tier, and quotas.",
      "type": "object",
      "properties": {
        "uid": { "type": "string" },
        "email": { "type": "string", "format": "email" },
        "displayName": { "type": "string" },
        "photoURL": { "type": "string", "format": "uri" },
        "tier": { "type": "string", "enum": ["free", "pro", "business"] },
        "storageUsed": { "type": "number" },
        "storageLimit": { "type": "number" },
        "dailyTasksUsed": { "type": "number" },
        "dailyTasksLimit": { "type": "number" },
        "dailyTasksReset": { "type": "string", "format": "date-time" },
        "monthlyAiCredits": { "type": "number" },
        "aiCreditsUsed": { "type": "number" },
        "aiCreditsReset": { "type": "string", "format": "date-time" },
        "createdAt": { "type": "string", "format": "date-time" },
        "lastActiveAt": { "type": "string", "format": "date-time" },
        "settings": {
          "type": "object",
          "properties": {
            "defaultSaveToWorkspace": { "type": "boolean" },
            "emailNotifications": { "type": "boolean" },
            "theme": { "type": "string", "enum": ["light", "dark"] }
          }
        },
        "teamId": { "type": "string" }
      },
      "required": ["uid", "email", "tier", "storageUsed", "storageLimit", "createdAt"]
    },
    "File": {
      "title": "File",
      "description": "Metadata for a stored file.",
      "type": "object",
      "properties": {
        "fileId": { "type": "string" },
        "ownerId": { "type": "string" },
        "teamId": { "type": "string" },
        "fileName": { "type": "string" },
        "originalName": { "type": "string" },
        "fileSize": { "type": "number" },
        "mimeType": { "type": "string" },
        "format": { "type": "string" },
        "storagePath": { "type": "string" },
        "downloadURL": { "type": "string", "format": "uri" },
        "thumbnailURL": { "type": "string", "format": "uri" },
        "folderId": { "type": "string" },
        "tags": { "type": "array", "items": { "type": "string" } },
        "metadata": {
          "type": "object",
          "properties": {
            "width": { "type": "number" },
            "height": { "type": "number" },
            "pages": { "type": "number" },
            "duration": { "type": "number" },
            "bitrate": { "type": "number" },
            "dpi": { "type": "number" },
            "colorMode": { "type": "string" },
            "isPasswordProtected": { "type": "boolean" }
          }
        },
        "status": { "type": "string", "enum": ["uploading", "scanning", "ready", "deleted"] },
        "virusScanResult": { "type": "string", "enum": ["clean", "infected", "pending"] },
        "isShared": { "type": "boolean" },
        "shareToken": { "type": "string" },
        "shareExpiresAt": { "type": "string", "format": "date-time" },
        "sharePassword": { "type": "string" },
        "shareAllowDownload": { "type": "boolean" },
        "autoDeleteAt": { "type": "string", "format": "date-time" },
        "parentFileId": { "type": "string" },
        "versionNumber": { "type": "number" },
        "versions": { "type": "array", "items": { "type": "object" } },
        "downloadCount": { "type": "number" },
        "createdAt": { "type": "string", "format": "date-time" },
        "updatedAt": { "type": "string", "format": "date-time" },
        "isDeleted": { "type": "boolean" },
        "teamMembers": { "type": "object", "description": "Denormalized team member map for rules." }
      },
      "required": ["fileId", "ownerId", "fileName", "fileSize", "format", "status"]
    },
    "Job": {
      "title": "Job",
      "description": "Processing job metadata.",
      "type": "object",
      "properties": {
        "jobId": { "type": "string" },
        "userId": { "type": "string" },
        "teamId": { "type": "string" },
        "type": { "type": "string" },
        "status": { "type": "string" },
        "progress": { "type": "number" },
        "queuedAt": { "type": "string", "format": "date-time" }
      },
      "required": ["jobId", "userId", "type", "status", "queuedAt"]
    }
  },
  "auth": {
    "providers": ["password", "google.com"]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/User" },
      "description": "User profiles and quotas."
    },
    "/files/{fileId}": {
      "schema": { "$ref": "#/entities/File" },
      "description": "Flat file collection with denormalized access."
    },
    "/jobs/{jobId}": {
      "schema": { "$ref": "#/entities/Job" },
      "description": "Processing jobs."
    },
    "/teams/{teamId}": {
      "schema": { "type": "object" },
      "description": "Team workspace metadata."
    },
    "/activityLogs/{logId}": {
      "schema": { "type": "object" },
      "description": "Audit trails."
    },
    "/notifications/{notifId}": {
      "schema": { "type": "object" },
      "description": "User notifications."
    }
  }
}
